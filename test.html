ay col<!DOCTYPE html>
<html>
<head>
    <title>Test Iframe Integration</title>
    <style>
        .iframe-container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            height: 600px;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }
        #status {
            margin: 20px auto;
            max-width: 800px;
            padding: 10px;
            border-radius: 4px;
        }
        .error { background: #fee2e2; color: #991b1b; }
        .success { background: #dcfce7; color: #166534; }
        .loading { background: #dbeafe; color: #1e40af; }
    </style>
</head>
<body>
    <div id="status">Waiting for messages...</div>
    <div class="iframe-container">
        <iframe
            src="http://localhost:3000"
            allow="clipboard-write"
            sandbox="allow-same-origin allow-scripts allow-forms allow-popups"
        ></iframe>
    </div>

    <script>
        const statusDiv = document.getElementById('status');
        console.log('Parent page loaded, listening for messages...');

        window.addEventListener('message', (event) => {
            if (event.origin !== "http://localhost:3000") return;

            console.log('Received message:', event.data);

            const { type, payload } = event.data;

            switch(type) {
                case 'BACKEND_ERROR':
                    statusDiv.className = 'error';
                    if (payload.code === 'NETWORK_ERROR') {
                        statusDiv.textContent = 'üîå ' + payload.message;
                    } else if (payload.code === 'SERVER_ERROR') {
                        statusDiv.textContent = 'üîß ' + payload.message;
                    }
                    break;

                case 'ERROR':
                    statusDiv.className = 'error';
                    statusDiv.textContent = '‚ùå ' + payload.message;
                    break;

                case 'LOADING':
                    statusDiv.className = 'loading';
                    statusDiv.textContent = payload.message;
                    break;

                case 'SUCCESS':
                    statusDiv.className = 'success';
                    statusDiv.textContent = payload.message;
                    break;

                case 'UPLOAD_COMPLETE':
                    statusDiv.className = 'success';
                    statusDiv.textContent = `‚úÖ ${payload.message} (URL: ${payload.url})`;
                    break;
            }
        });
    </script>
</body>
</html>